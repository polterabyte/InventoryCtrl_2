# Руководство по управлению пользователями

## Обзор
Создана страница управления пользователями, доступная только для администраторов по адресу `/admin/users`.

## Функциональность

### 1. Просмотр пользователей
- Таблица со всеми пользователями системы
- Пагинация (10, 25, 50, 100 записей на страницу)
- Поиск по имени пользователя или email
- Фильтрация по ролям (Admin, Manager, User)
- Статистика по количеству пользователей по ролям

### 2. Редактирование пользователей
- Изменение имени пользователя
- Изменение email
- Изменение роли
- Подтверждение email
- Валидация данных

### 3. Управление паролями
- Смена пароля для любого пользователя
- Подтверждение нового пароля
- Валидация пароля

### 4. Удаление пользователей
- Удаление пользователей (кроме собственного аккаунта)
- Подтверждение удаления
- Защита от случайного удаления

### 5. Экспорт данных
- Экспорт пользователей в CSV формат
- Применение текущих фильтров к экспорту
- Автоматическое скачивание файла

## Безопасность

### Защита доступа
- Страница доступна только пользователям с ролью "Admin"
- Компонент `AdminGuard` проверяет права доступа
- При отсутствии прав показывается страница с ошибкой

### API защита
- Все API endpoints защищены атрибутом `[Authorize(Roles = "Admin")]`
- Требуется валидный JWT токен
- Проверка ролей на серверной стороне

## Технические детали

### Компоненты
- `UserManagement.razor` - основная страница
- `AdminGuard.razor` - защита от неавторизованного доступа
- `UserManagementService.cs` - сервис для работы с API

### API Endpoints
- `GET /api/user` - получение списка пользователей с пагинацией
- `GET /api/user/{id}` - получение конкретного пользователя
- `PUT /api/user/{id}` - обновление пользователя
- `DELETE /api/user/{id}` - удаление пользователя
- `POST /api/user/{id}/change-password` - смена пароля
- `GET /api/user/export` - экспорт пользователей в CSV

### Стили
- Адаптивный дизайн
- Bootstrap компоненты
- Кастомные CSS стили в `UserManagement.razor.css`

## Использование

1. Войдите в систему под учетной записью администратора
2. Перейдите в меню "Управление пользователями"
3. Используйте фильтры для поиска нужных пользователей
4. Редактируйте пользователей через кнопку "Edit"
5. Меняйте пароли через кнопку "Change Password"
6. Удаляйте пользователей через кнопку "Delete"
7. Экспортируйте данные через кнопку "Export"

## Навигация
Ссылка на страницу добавлена в навигационное меню для пользователей с ролью "Admin".
