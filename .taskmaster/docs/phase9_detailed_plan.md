# –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –§–∞–∑—ã 9 - –£–ª—É—á—à–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

## üìã –û–±–∑–æ—Ä —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å —Ç–æ–∫–µ–Ω–∞–º–∏
- –ë–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å AuditLog
- –†–æ–ª–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ (Admin, User, Manager)
- AuthController —Å login/register/refresh/logout endpoints

### ‚ùå –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏:
- Refresh Token —Å–∏—Å—Ç–µ–º–∞ (—Å–µ–π—á–∞—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ re-authentication)
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞—É–¥–∏—Ç –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- Rate Limiting –¥–ª—è API
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

## üéØ –ó–∞–¥–∞—á–∞ 1: JWT Refresh Token —Å–∏—Å—Ç–µ–º–∞

### 1.1 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ User
**–§–∞–π–ª**: `src/Inventory.API/Models/User.cs`
**–î–µ–π—Å—Ç–≤–∏—è**:
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `RefreshToken` (string?)
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `RefreshTokenExpiry` (DateTime?)
- –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π

**–ö–æ–¥**:
```csharp
public class User : Microsoft.AspNetCore.Identity.IdentityUser<string>
{
    public string Role { get; set; } = string.Empty;
    public DateTime CreatedAt { get; set; }
    public DateTime? UpdatedAt { get; set; }
    public string? RefreshToken { get; set; }
    public DateTime? RefreshTokenExpiry { get; set; }
    public ICollection<InventoryTransaction> Transactions { get; set; } = new List<InventoryTransaction>();
    public ICollection<ProductHistory> ProductHistories { get; set; } = new List<ProductHistory>();
}
```

### 1.2 –°–æ–∑–¥–∞–Ω–∏–µ RefreshTokenService
**–§–∞–π–ª**: `src/Inventory.API/Services/RefreshTokenService.cs`
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è refresh —Ç–æ–∫–µ–Ω–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è refresh —Ç–æ–∫–µ–Ω–æ–≤
- –û—Ç–∑—ã–≤ refresh —Ç–æ–∫–µ–Ω–æ–≤
- –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤

### 1.3 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ AuthController
**–§–∞–π–ª**: `src/Inventory.API/Controllers/AuthController.cs`
**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–æ–¥ `Login` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ refresh —Ç–æ–∫–µ–Ω–∞
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É –≤ –º–µ—Ç–æ–¥–µ `Refresh`
- –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–æ–¥ `Logout` –¥–ª—è –æ—Ç–∑—ã–≤–∞ refresh —Ç–æ–∫–µ–Ω–∞
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `RevokeToken` –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ—Ç–∑—ã–≤–∞

### 1.4 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ DTOs
**–§–∞–π–ª**: `src/Inventory.Shared/DTOs/`
**–ù–æ–≤—ã–µ DTOs**:
- `RefreshTokenRequest` - –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞
- `RefreshTokenResponse` - –¥–ª—è –æ—Ç–≤–µ—Ç–∞ —Å –Ω–æ–≤—ã–º —Ç–æ–∫–µ–Ω–æ–º
- –û–±–Ω–æ–≤–∏—Ç—å `LoginResult` –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è refresh —Ç–æ–∫–µ–Ω–∞

### 1.5 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
**–§–∞–π–ª**: `src/Inventory.API/appsettings.json`
**–î–æ–±–∞–≤–∏—Ç—å**:
```json
{
  "Jwt": {
    "Key": "...",
    "Issuer": "...",
    "Audience": "...",
    "ExpireMinutes": 15,
    "RefreshTokenExpireDays": 7
  }
}
```

## üéØ –ó–∞–¥–∞—á–∞ 2: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π

### 2.1 –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ AuditLog
**–§–∞–π–ª**: `src/Inventory.API/Models/AuditLog.cs`
**–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è**:
- `ActionType` (enum: Create, Read, Update, Delete)
- `EntityType` (string) - —Ç–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏
- `Changes` (JSON) - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- `RequestId` (string) - ID –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏

### 2.2 –°–æ–∑–¥–∞–Ω–∏–µ AuditService
**–§–∞–π–ª**: `src/Inventory.API/Services/AuditService.cs`
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
- –°–æ–∑–¥–∞–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫ –∞—É–¥–∏—Ç-–ª–æ–≥–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Entity Framework Change Tracking

### 2.3 –°–æ–∑–¥–∞–Ω–∏–µ AuditController
**–§–∞–π–ª**: `src/Inventory.API/Controllers/AuditController.cs`
**Endpoints**:
- `GET /api/audit` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∞—É–¥–∏—Ç-–ª–æ–≥–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- `GET /api/audit/{entityType}/{entityId}` - –∞—É–¥–∏—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏
- `GET /api/audit/user/{userId}` - –∞—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 2.4 –°–æ–∑–¥–∞–Ω–∏–µ AuditMiddleware
**–§–∞–π–ª**: `src/Inventory.API/Middleware/AuditMiddleware.cs`
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- –°–≤—è–∑—ã–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –∞—É–¥–∏—Ç-–∑–∞–ø–∏—Å—è–º–∏

### 2.5 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
**–§–∞–π–ª—ã**: –í—Å–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –≤ `src/Inventory.API/Controllers/`
**–î–æ–±–∞–≤–∏—Ç—å**:
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å AuditService
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üéØ –ó–∞–¥–∞—á–∞ 3: Rate Limiting –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### 3.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Rate Limiting
**–§–∞–π–ª**: `src/Inventory.API/Program.cs`
**–î–æ–±–∞–≤–∏—Ç—å**:
- ASP.NET Core Rate Limiting middleware
- –†–∞–∑–Ω—ã–µ –ª–∏–º–∏—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–æ–ª–µ–π
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ appsettings.json

### 3.2 –£–ª—É—á—à–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
**–§–∞–π–ª**: `src/Inventory.Shared/Validators/`
**–°–æ–∑–¥–∞—Ç—å**:
- FluentValidation –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –¥–ª—è –≤—Å–µ—Ö DTOs
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### 3.3 CORS –ø–æ–ª–∏—Ç–∏–∫–∏ –ø–æ —Ä–æ–ª—è–º
**–§–∞–π–ª**: `src/Inventory.API/Program.cs`
**–ù–∞—Å—Ç—Ä–æ–∏—Ç—å**:
- –†–∞–∑–Ω—ã–µ CORS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–æ–ª–µ–π
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è production

### 3.4 CSRF –∑–∞—â–∏—Ç–∞
**–§–∞–π–ª**: `src/Inventory.API/Program.cs`
**–î–æ–±–∞–≤–∏—Ç—å**:
- Anti-forgery —Ç–æ–∫–µ–Ω—ã
- CSRF middleware

## üéØ –ó–∞–¥–∞—á–∞ 4: Frontend –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### 4.1 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ AuthenticationService
**–§–∞–π–ª**: `src/Inventory.Web.Client/Services/AuthenticationService.cs`
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è refresh —Ç–æ–∫–µ–Ω–æ–≤
- Retry –ª–æ–≥–∏–∫–∞ –¥–ª—è failed –∑–∞–ø—Ä–æ—Å–æ–≤

### 4.2 –°–æ–∑–¥–∞–Ω–∏–µ AuditLogs —Å—Ç—Ä–∞–Ω–∏—Ü—ã
**–§–∞–π–ª**: `src/Inventory.UI/Pages/AuditLogs.razor`
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∞—É–¥–∏—Ç-–ª–æ–≥–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –¥–∞—Ç–µ, –¥–µ–π—Å—Ç–≤–∏—é
- –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV/Excel

### 4.3 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
**–§–∞–π–ª—ã**: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ `src/Inventory.UI/Components/`
**–î–æ–±–∞–≤–∏—Ç—å**:
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –∞—É–¥–∏—Ç-–æ–ø–µ—Ä–∞—Ü–∏–π
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## üéØ –ó–∞–¥–∞—á–∞ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 5.1 Unit —Ç–µ—Å—Ç—ã
**–§–∞–π–ª—ã**: `test/Inventory.UnitTests/`
**–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è**:
- RefreshTokenService
- AuditService
- Rate Limiting middleware
- –í–∞–ª–∏–¥–∞—Ç–æ—Ä—ã

### 5.2 Integration —Ç–µ—Å—Ç—ã
**–§–∞–π–ª—ã**: `test/Inventory.IntegrationTests/`
**–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è**:
- JWT refresh token flow
- Audit logging endpoints
- Rate limiting behavior
- CORS policies

### 5.3 Component —Ç–µ—Å—Ç—ã
**–§–∞–π–ª—ã**: `test/Inventory.ComponentTests/`
**–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è**:
- AuditLogs —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- Authentication flow

## üìÖ –í—Ä–µ–º–µ–Ω–Ω–æ–π –ø–ª–∞–Ω

### –ù–µ–¥–µ–ª—è 1: JWT Refresh Token —Å–∏—Å—Ç–µ–º–∞
- **–î–µ–Ω—å 1-2**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ User –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
- **–î–µ–Ω—å 3-4**: –°–æ–∑–¥–∞–Ω–∏–µ RefreshTokenService
- **–î–µ–Ω—å 5**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ AuthController –∏ DTOs
- **–î–µ–Ω—å 6-7**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ù–µ–¥–µ–ª—è 2: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞—É–¥–∏—Ç
- **–î–µ–Ω—å 1-2**: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ AuditLog –º–æ–¥–µ–ª–∏ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ AuditService
- **–î–µ–Ω—å 3-4**: –°–æ–∑–¥–∞–Ω–∏–µ AuditController –∏ AuditMiddleware
- **–î–µ–Ω—å 5**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
- **–î–µ–Ω—å 6-7**: Frontend –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∞—É–¥–∏—Ç-–ª–æ–≥–æ–≤

### –ù–µ–¥–µ–ª—è 3: Rate Limiting –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- **–î–µ–Ω—å 1-2**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Rate Limiting
- **–î–µ–Ω—å 3-4**: –£–ª—É—á—à–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å FluentValidation
- **–î–µ–Ω—å 5**: CORS –ø–æ–ª–∏—Ç–∏–∫–∏ –∏ CSRF –∑–∞—â–∏—Ç–∞
- **–î–µ–Ω—å 6-7**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
```xml
<PackageReference Include="Microsoft.AspNetCore.RateLimiting" Version="9.0.0" />
<PackageReference Include="FluentValidation.AspNetCore" Version="11.3.0" />
<PackageReference Include="FluentValidation.DependencyInjectionExtensions" Version="11.3.0" />
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è appsettings.json
```json
{
  "RateLimiting": {
    "DefaultPolicy": {
      "PermitLimit": 100,
      "Window": "00:01:00"
    },
    "AdminPolicy": {
      "PermitLimit": 1000,
      "Window": "00:01:00"
    }
  },
  "Jwt": {
    "RefreshTokenExpireDays": 7
  }
}
```

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### JWT Refresh Token —Å–∏—Å—Ç–µ–º–∞
- [x] Refresh —Ç–æ–∫–µ–Ω—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ ‚úÖ
- [x] Refresh endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚úÖ
- [x] –¢–æ–∫–µ–Ω—ã –º–æ–∂–Ω–æ –æ—Ç–æ–∑–≤–∞—Ç—å –ø—Ä–∏ logout ‚úÖ
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (—Ç—Ä–µ–±—É–µ—Ç frontend –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞—É–¥–∏—Ç
- [ ] –í—Å–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- [ ] –ê—É–¥–∏—Ç-–ª–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ API
- [ ] Frontend —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤
- [ ] –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

### Rate Limiting –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- [ ] API –∑–∞—â–∏—â–µ–Ω –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏
- [ ] CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –±–µ–∑–æ–ø–∞—Å–Ω–æ
- [ ] CSRF –∑–∞—â–∏—Ç–∞ –∞–∫—Ç–∏–≤–Ω–∞

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –í—Å–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏
- [ ] Integration —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] Component —Ç–µ—Å—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ > 80%

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è JWT Refresh Token —Å–∏—Å—Ç–µ–º—ã

### ‚úÖ –£—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**:
   ```
   POST /api/auth/register
   Status: 201 Created
   Response: {"success":true,"data":{"message":"User created successfully"}}
   ```

2. **–õ–æ–≥–∏–Ω —Å –ø–æ–ª—É—á–µ–Ω–∏–µ–º —Ç–æ–∫–µ–Ω–æ–≤**:
   ```
   POST /api/auth/login
   Status: 200 OK
   Response: {
     "success": true,
     "data": {
       "token": "JWT access token (15 –º–∏–Ω—É—Ç)",
       "refreshToken": "Base64 refresh token (7 –¥–Ω–µ–π)",
       "expiresAt": "2025-09-17T09:26:57.6576037Z",
       "username": "testuser",
       "email": "test@example.com",
       "role": "User"
     }
   }
   ```

3. **Refresh —Ç–æ–∫–µ–Ω–æ–≤**:
   ```
   POST /api/auth/refresh
   Status: 200 OK
   Response: –ù–æ–≤—ã–µ access –∏ refresh —Ç–æ–∫–µ–Ω—ã
   –õ–æ–≥–∏: "Token refreshed successfully for user testuser"
   ```

4. **Logout —Å –æ—Ç–∑—ã–≤–æ–º —Ç–æ–∫–µ–Ω–∞**:
   ```
   POST /api/auth/logout
   Status: 200 OK
   Response: {"success":true,"data":{"message":"Logged out successfully"}}
   ```

### üìä –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤:

–ò–∑ –ª–æ–≥–æ–≤ –≤–∏–¥–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã:
- Refresh —Ç–æ–∫–µ–Ω—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Å—Ä–æ–∫–æ–º –¥–µ–π—Å—Ç–≤–∏—è (7 –¥–Ω–µ–π)
- –í–∞–ª–∏–¥–∞—Ü–∏—è refresh —Ç–æ–∫–µ–Ω–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ù–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º refresh
- –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

1. **JWT Token Validation**: –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ "JWT Token validated for user: null" - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è logout –æ–ø–µ—Ä–∞—Ü–∏–∏
2. **Refresh Token Rotation**: –°–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ refresh —Ç–æ–∫–µ–Ω—ã –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
3. **Security**: Refresh —Ç–æ–∫–µ–Ω—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é (RandomNumberGenerator)

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ:
1. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ User** ‚úÖ
2. **–°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏** ‚úÖ
3. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è RefreshTokenService** ‚úÖ
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ AuthController** ‚úÖ
5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ JWT refresh flow** ‚úÖ

### üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ:
6. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ AuthenticationService –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ** (frontend)

### üìã –°–ª–µ–¥—É—é—â–∏–µ –∑–∞–¥–∞—á–∏:
7. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∞—É–¥–∏—Ç–∞** - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1
8. **Rate Limiting –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è** - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2
9. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3
10. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏** - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4

**–ì–æ—Ç–æ–≤ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å —Å–∏—Å—Ç–µ–º–æ–π –∞—É–¥–∏—Ç–∞?**
